<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - Mergington High School</title>
<link rel="stylesheet" href="styles.css" />
<style>
.parent{
    display:grid;
    height:100vh;
    grid-template-rows:10% 80% 10%;
    grid-template-columns:15% 70% 15%;
}

.parent_header{
    background-color: bisque;
    grid-row:1/2;
    grid-column:1/4;
    padding:1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.parent_leftmenu{
    background-color: beige;
    grid-row:2/3;
    grid-column:1/2;
    padding:1rem;
}

.parent_body{
    background-color: aquamarine;
    grid-row:2/3;
    grid-column:2/3;
    padding:1rem;
}

.parent_rightmenu{
    background-color: antiquewhite;
    grid-row:2/3;
    grid-column:3/4;
    padding:1rem;
}

.parent_footer{
    background-color: burlywood;
    grid-row:3/4;
    grid-column:1/4;
    padding:0.5rem;
    text-align:center;
}

table{
    width:100%;
    border-collapse: collapse;
    margin-top:10px;
}

th, td{
    border:1px solid black;
    padding:5px;
}

a{
    text-decoration:none;
    color:black;
}
</style>
</head>
<body>

<div class="parent">

<div class="parent_header">
Admin Dashboard <span><a href="/logout">Logout</a></span>
</div>

<div class="parent_leftmenu">
Manage Activities<br>
Manage Students<br>
Reports
</div>

<div class="parent_body">
<h3>Activity List</h3>
<table id="activities-table">
<tr>
<th>S.no</th>
<th>Activity</th>
<th>Description</th>
<th>Participants</th>
<th>Edit</th>
<th>Delete</th>
</tr>
<!-- Activities will be loaded here -->
</table>
</div>

<div class="parent_rightmenu">
Notifications:<br>
Pending registrations<br>
Activity updates
</div>

<div class="parent_footer"></div>

</div>

<script>
async function loadActivities() {
    const response = await fetch('/activities');
    const activities = await response.json();
    const table = document.getElementById('activities-table');
    let i = 1;
    for (const [name, data] of Object.entries(activities)) {
        const row = table.insertRow();
        row.insertCell(0).textContent = i++;
        row.insertCell(1).textContent = name;
        row.insertCell(2).textContent = data.description;
        row.insertCell(3).textContent = data.participants.length + '/' + data.max_participants;
        row.insertCell(4).innerHTML = '<button>Edit</button>';
        row.insertCell(5).innerHTML = '<button>Delete</button>';
    }
}

loadActivities();
</script>

</body>
</html>